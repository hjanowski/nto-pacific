<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NTO Pacific | Premium Diving Equipment</title>
  <!-- Suppress favicon 404 -->
  <link rel="icon" href="data:;base64,iVBORw0KGgo=">
  <link rel="stylesheet" href="styles.css">
  <script src="script.js" defer></script>
  <!-- Salesforce Interactions SDK -->
  <script src="https://cdn.c360a.salesforce.com/beacon/c360a/233a8f36-3f93-4e01-84e5-c210837a6c97/scripts/c360a.min.js"></script>
</head>
<body>
  <header>
    <div class="container">
      <div class="logo">
        <h1>NTO Pacific</h1>
        <p>Premium Diving Equipment</p>
      </div>
      <nav>
        <ul>
          <li><a href="#" class="active">Home</a></li>
          <li><a href="catalog.html">Shop</a></li>
          <li><a href="about.html">About</a></li>
          <li><a href="#">Contact</a></li>
        </ul>
      </nav>
      <div class="user-actions">
        <button id="cart-btn" class="btn-icon"><span class="cart-count">0</span>ðŸ›’</button>
        <button id="login-btn" class="btn-primary">Login</button>
      </div>
    </div>
  </header>

  <section class="hero">
    <div class="container">
      <div class="hero-content">
        <h2>Explore the Depths</h2>
        <p>Professional diving equipment for every adventure</p>
        <button class="btn-primary btn-large" id="shop-now-btn">Shop Now</button>
      </div>
    </div>
  </section>

  <section class="featured-products">
    <div class="container">
      <h2 class="section-title">Featured Equipment</h2>
      <div class="products-grid">
        <div class="product-card" data-product-id="1" data-product-name="Elite Pro Diving Mask" data-product-price="129.99" data-in-stock="true">
          <div class="product-image"></div>
          <h3>Elite Pro Diving Mask</h3>
          <p class="product-price">$129.99</p>
          <button class="btn-secondary add-to-cart">Add to Cart</button>
        </div>
        <div class="product-card" data-product-id="2" data-product-name="Aqua Lung Regulator" data-product-price="349.99" data-in-stock="true">
          <div class="product-image"></div>
          <h3>Aqua Lung Regulator</h3>
          <p class="product-price">$349.99</p>
          <button class="btn-secondary add-to-cart">Add to Cart</button>
        </div>
        <div class="product-card" data-product-id="3" data-product-name="Pacific Fins - Limited Edition" data-product-price="189.99" data-in-stock="false">
          <div class="product-image"></div>
          <h3>Pacific Fins - Limited Edition</h3>
          <p class="product-price">$189.99</p>
          <p class="out-of-stock">Out of Stock</p>
          <button class="btn-secondary notify-me">Notify Me</button>
        </div>
        <div class="product-card" data-product-id="4" data-product-name="Dive Computer Pro X" data-product-price="599.99" data-in-stock="true">
          <div class="product-image"></div>
          <h3>Dive Computer Pro X</h3>
          <p class="product-price">$599.99</p>
          <button class="btn-secondary add-to-cart">Add to Cart</button>
        </div>
      </div>
    </div>
  </section>

  <section class="collection-banner">
    <div class="container">
      <div class="banner-content">
        <h2>New 2025 Collection</h2>
        <p>Engineered for the deepest dives</p>
        <button class="btn-primary">Explore Collection</button>
      </div>
    </div>
  </section>

  <!-- Full Footer -->
  <footer>
    <div class="container">
      <div class="footer-columns">
        <div class="footer-column">
          <h3>NTO Pacific</h3>
          <p>Premium diving equipment for professional and recreational divers since 2010.</p>
        </div>
        <div class="footer-column">
          <h3>Quick Links</h3>
          <ul>
            <li><a href="#">Home</a></li>
            <li><a href="#">Shop</a></li>
            <li><a href="#">About</a></li>
            <li><a href="#">Contact</a></li>
          </ul>
        </div>
        <div class="footer-column">
          <h3>Customer Service</h3>
          <ul>
            <li><a href="#">Shipping</a></li>
            <li><a href="#">Returns</a></li>
            <li><a href="#">FAQ</a></li>
          </ul>
        </div>
        <div class="footer-column">
          <h3>Newsletter</h3>
          <p>Subscribe for updates on new products and promotions</p>
          <form id="newsletter-form-footer">
            <input type="email" placeholder="Your email">
            <button type="submit" class="btn-primary">Subscribe</button>
          </form>
        </div>
      </div>
      <div class="copyright">
        <p>Â© 2025 NTO Pacific. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <!-- Modal Components -->
  <div class="modal" id="login-modal"> ... </div>
  <div class="modal" id="signup-modal"> ... </div>
  <div class="modal" id="cart-modal"> ... </div>
  <div class="modal" id="checkout-modal"> ... </div>
  <div class="modal" id="notify-modal"> ... </div>
  <div class="modal" id="confirmation-modal"> ... </div>

  <div class="overlay"></div>

  <!-- Inline Salesforce init & event scripts -->
  <script>
    const log = (...args) => console.log('[SF]', ...args);
    document.addEventListener('DOMContentLoaded', () => {
      log('Checking SDK...');
      let attempts = 0;
      const max = 20;
      const check = () => {
        if (window.SalesforceInteractions &&
            typeof window.SalesforceInteractions.sendEvent === 'function') {
          log('SDK loaded');
          initConsent();
        } else if (++attempts < max) {
          setTimeout(check, 1000);
        } else {
          log('SDK failed to load after attempts');
        }
      };
      check();

      function initConsent() {
        log('Initializing consent...');
        window.SalesforceInteractions.init({
          consents:[{provider:'CampaignAttribution',purpose:'Tracking',status:'Opt In'}]
        }).then(res => {
          log('Consent init success', res);
          sendIdentity();
        }).catch(err => log('Consent init error', err));
      }
      function sendIdentity() {
        log('Sending identity...');
        window.SalesforceInteractions.sendEvent({user:{attributes:{eventType:'identity',email:'',isAnonymous:0}}})
          .then(res => log('Identity sent', res))
          .catch(err => log('Identity error', err));
      }

      // Wire add-to-cart
      document.querySelectorAll('.add-to-cart').forEach(btn => {
        btn.addEventListener('click', () => {
          const payload = {interaction:{name:'Campaigns Events',eventType:'campaignsEvents',campaignName:'Default',campaignSource:'Default',campaignContent:'Default',custom1:'product_add_to_cart',custom2:btn.closest('.product-card').dataset.productName,custom3:new Date().toISOString()}};
          log('Sending Add-to-cart event:', payload);
          window.SalesforceInteractions.sendEvent(payload)
            .then(res => log('Add-to-cart success', res))
            .catch(err => log('Add-to-cart error', err));
        });
      });

      // Wire newsletter
      document.getElementById('newsletter-form-footer').addEventListener('submit', e => {
        e.preventDefault();
        const email = e.target.querySelector('input').value;
        const payload = {interaction:{name:'Campaigns Events',eventType:'campaignsEvents',campaignName:'Default',campaignSource:'Default',campaignContent:'Default',custom1:'Newsletter Signup',custom2:email,custom3:new Date().toISOString()}};
        log('Sending Newsletter event:', payload);
        window.SalesforceInteractions.sendEvent(payload)
          .then(res => log('Newsletter success', res))
          .catch(err => log('Newsletter error', err));
      });
    });
  </script>
</body>
</html>
